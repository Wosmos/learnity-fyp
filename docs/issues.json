{
  "goal": "Fix severe performance and architectural issues in the student, teacher, and admin portals without breaking the existing codebase.",
  "current_problems": [
    "Navbar and sidebar overlap and go out of sync in admin access",
    "/api/auth/profile is called repeatedly without need",
    "Student dashboard and courses pages constantly reload data",
    "All student and teacher pages take 10–15 seconds to load",
    "No effective caching is currently applied",
    "Too much client-side rendering"
  ],
  "pages_to_fix": {
    "student": [
      "dashboard",
      "achievements",
      "courses",
      "profile",
      "progress",
      "public-courses"
    ],
    "teacher": "All teacher pages suffer from the same issues"
  },
  "non_negotiable_rules": [
    "Do not break the existing codebase structure",
    "Do not convert files unnecessarily",
    "Do not hallucinate missing code",
    "Do not introduce new patterns unless required",
    "Check for existing solutions before adding new ones"
  ],
  "performance_targets": {
    "initial_load": "1s to 1.5s maximum",
    "subsequent_navigation": "100ms to 200ms",
    "overall_improvement": "10x–15x faster"
  },
  "required_fixes": {
    "rendering": [
      "Make every page server-side rendered",
      "No page.tsx or layout.tsx should remain client-side",
      "Use React Server Components by default"
    ],
    "rendering_strategies": {
      "SSR": "Authenticated and user-specific pages",
      "PPR": "Dashboards with mixed content",
      "ISR": "Achievements and semi-static pages",
      "SSG": "Public, non-auth pages"
    },
    "caching": [
      "Implement proper Next.js fetch caching",
      "Prevent repeated API calls",
      "Cache profile and session data",
      "Avoid refetching on navigation"
    ]
  },
  "diagnosis_first": [
    "Inspect why /api/auth/profile is repeatedly called",
    "Find client components causing re-renders",
    "Check layout rendering order",
    "Verify missing or misconfigured caching"
  ],
  "final_output": [
    "Comprehensive documentation",
    "Optimized SSR-based pages",
    "Drastically improved performance",
    "Stable navigation and layout"
  ]
}
